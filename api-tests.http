### API de Gerenciamento de Notas - Testes
### Use a extensão REST Client do VS Code para executar estas requisições
### Clique em "Send Request" acima de cada requisição

@baseUrl = http://localhost:3000
@contentType = application/json

#############################################
# 1. HEALTH CHECK E STATUS
#############################################

### Health Check
GET {{baseUrl}}/health

### Status da API
GET {{baseUrl}}/api

#############################################
# 2. CRIAR ESTUDANTES (POST)
#############################################

### Criar estudante - Pedro Oliveira
POST {{baseUrl}}/api/notas/inserir
Content-Type: {{contentType}}

{
  "nome": "Pedro Oliveira",
  "nota1": 7.0,
  "nota2": 8.5,
  "nota3": 8.0
}

### Criar estudante - Ana Costa
POST {{baseUrl}}/api/notas/inserir
Content-Type: {{contentType}}

{
  "nome": "Ana Costa",
  "nota1": 10.0,
  "nota2": 9.5,
  "nota3": 9.8
}

### Criar estudante - Carlos Pereira
POST {{baseUrl}}/api/notas/inserir
Content-Type: {{contentType}}

{
  "nome": "Carlos Pereira",
  "nota1": 6.5,
  "nota2": 7.0,
  "nota3": 6.8
}

#############################################
# 3. LISTAR ESTUDANTES (GET)
#############################################

### Listar todos os estudantes
GET {{baseUrl}}/api/notas

### Buscar estudante específico - João Silva
GET {{baseUrl}}/api/notas/João Silva

### Buscar estudante específico - Maria Santos
GET {{baseUrl}}/api/notas/Maria Santos

#############################################
# 4. ATUALIZAR ESTUDANTES (PUT)
#############################################

### Atualizar todas as notas - João Silva
PUT {{baseUrl}}/api/editar/João Silva
Content-Type: {{contentType}}

{
  "nota1": 9.0,
  "nota2": 9.5,
  "nota3": 8.5
}

### Atualizar apenas nota1 - Maria Santos
PUT {{baseUrl}}/api/editar/Maria Santos
Content-Type: {{contentType}}

{
  "nota1": 10.0
}

### Atualizar notas 2 e 3 - Pedro Oliveira
PUT {{baseUrl}}/api/editar/Pedro Oliveira
Content-Type: {{contentType}}

{
  "nota2": 9.0,
  "nota3": 8.5
}

#############################################
# 5. EXCLUIR ESTUDANTES (DELETE)
#############################################

### Excluir estudante - Carlos Pereira
DELETE {{baseUrl}}/api/excluir/Carlos Pereira

### Excluir estudante - Ana Costa
DELETE {{baseUrl}}/api/excluir/Ana Costa

#############################################
# 6. TESTES DE VALIDAÇÃO (ERROS ESPERADOS)
#############################################

### ERRO: Nome muito curto (mínimo 3 caracteres)
POST {{baseUrl}}/api/notas/inserir
Content-Type: {{contentType}}

{
  "nome": "Jo",
  "nota1": 8.0,
  "nota2": 9.0,
  "nota3": 7.0
}

### ERRO: Nota acima do máximo (10)
POST {{baseUrl}}/api/notas/inserir
Content-Type: {{contentType}}

{
  "nome": "Teste Nota Alta",
  "nota1": 11.0,
  "nota2": 9.0,
  "nota3": 7.0
}

### ERRO: Nota abaixo do mínimo (0)
POST {{baseUrl}}/api/notas/inserir
Content-Type: {{contentType}}

{
  "nome": "Teste Nota Baixa",
  "nota1": -1.0,
  "nota2": 9.0,
  "nota3": 7.0
}

### ERRO: Nota com mais de uma casa decimal
POST {{baseUrl}}/api/notas/inserir
Content-Type: {{contentType}}

{
  "nome": "Teste Decimal",
  "nota1": 8.55,
  "nota2": 9.0,
  "nota3": 7.0
}

### ERRO: Campo obrigatório faltando (nota3)
POST {{baseUrl}}/api/notas/inserir
Content-Type: {{contentType}}

{
  "nome": "Teste Incompleto",
  "nota1": 8.0,
  "nota2": 9.0
}

### ERRO: Nome com números (apenas letras permitidas)
POST {{baseUrl}}/api/notas/inserir
Content-Type: {{contentType}}

{
  "nome": "João123 Silva",
  "nota1": 8.0,
  "nota2": 9.0,
  "nota3": 7.0
}

### ERRO: Estudante duplicado
# Primeiro execute a criação do João Silva (linha 24)
# Depois execute esta requisição
POST {{baseUrl}}/api/notas/inserir
Content-Type: {{contentType}}

{
  "nome": "João Silva",
  "nota1": 10.0,
  "nota2": 10.0,
  "nota3": 10.0
}

### ERRO: Estudante não encontrado (buscar)
GET {{baseUrl}}/api/notas/Estudante Inexistente

### ERRO: Estudante não encontrado (atualizar)
PUT {{baseUrl}}/api/editar/Estudante Inexistente
Content-Type: {{contentType}}

{
  "nota1": 9.0
}

### ERRO: Estudante não encontrado (excluir)
DELETE {{baseUrl}}/api/excluir/Estudante Inexistente

### ERRO: Atualizar sem informar nenhuma nota
PUT {{baseUrl}}/api/editar/João Silva
Content-Type: {{contentType}}

{
}

#############################################
# 7. CASOS DE USO COMPLETOS
#############################################

### Caso de Uso 1: Criar e Atualizar
# 1. Criar estudante
POST {{baseUrl}}/api/notas/inserir
Content-Type: {{contentType}}

{
  "nome": "Teste Completo",
  "nota1": 7.0,
  "nota2": 7.5,
  "nota3": 7.2
}

### 2. Verificar criação
GET {{baseUrl}}/api/notas/Teste Completo

### 3. Atualizar notas
PUT {{baseUrl}}/api/editar/Teste Completo
Content-Type: {{contentType}}

{
  "nota1": 9.0,
  "nota2": 9.5,
  "nota3": 9.2
}

### 4. Verificar atualização
GET {{baseUrl}}/api/notas/Teste Completo

### 5. Excluir estudante
DELETE {{baseUrl}}/api/excluir/Teste Completo

### 6. Verificar exclusão (deve retornar 404)
GET {{baseUrl}}/api/notas/Teste Completo

#############################################
# 8. TESTES DE PERFORMANCE
#############################################

### Criar múltiplos estudantes rapidamente
# Execute várias vezes para testar concorrência

POST {{baseUrl}}/api/notas/inserir
Content-Type: {{contentType}}

{
  "nome": "Aluno Teste {{$randomInt}}",
  "nota1": {{$randomInt 0 10}}.{{$randomInt 0 9}},
  "nota2": {{$randomInt 0 10}}.{{$randomInt 0 9}},
  "nota3": {{$randomInt 0 10}}.{{$randomInt 0 9}}
}
